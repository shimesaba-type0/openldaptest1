2018-12-17 08:48:29,830 p=49954 u=Shimesaba |  PLAY [all] *********************************************************************
2018-12-17 08:48:29,859 p=49954 u=Shimesaba |  TASK [Gathering Facts] *********************************************************
2018-12-17 08:48:33,651 p=49954 u=Shimesaba |  ok: [default]
2018-12-17 08:48:33,704 p=49954 u=Shimesaba |  TASK [get os version] **********************************************************
2018-12-17 08:48:34,927 p=49954 u=Shimesaba |  changed: [default]
2018-12-17 08:48:34,963 p=49954 u=Shimesaba |  TASK [debug result ver] ********************************************************
2018-12-17 08:48:35,179 p=49954 u=Shimesaba |  ok: [default] => {
    "msg": "CentOS Linux release 7.5.1804 (Core) "
}
2018-12-17 08:48:35,222 p=49954 u=Shimesaba |  TASK [get karnel information] **************************************************
2018-12-17 08:48:36,012 p=49954 u=Shimesaba |  changed: [default]
2018-12-17 08:48:36,070 p=49954 u=Shimesaba |  TASK [debug result ver] ********************************************************
2018-12-17 08:48:36,307 p=49954 u=Shimesaba |  ok: [default] => {
    "msg": "Linux localhost.localdomain 3.10.0-862.14.4.el7.x86_64 #1 SMP Wed Sep 26 15:12:11 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux"
}
2018-12-17 08:48:36,349 p=49954 u=Shimesaba |  TASK [Install OpenLDAP servers and clients] ************************************
2018-12-17 08:48:40,900 p=49954 u=Shimesaba |  ok: [default]
2018-12-17 08:48:40,932 p=49954 u=Shimesaba |  TASK [display package install] *************************************************
2018-12-17 08:48:41,120 p=49954 u=Shimesaba |  ok: [default] => {
    "result": {
        "changed": false,
        "failed": false,
        "msg": "",
        "obsoletes": {
            "grub2": {
                "dist": "x86_64",
                "repo": "@anaconda",
                "version": "1:2.02-0.65.el7.centos.2"
            },
            "grub2-tools": {
                "dist": "x86_64",
                "repo": "@anaconda",
                "version": "1:2.02-0.65.el7.centos.2"
            }
        },
        "rc": 0,
        "results": [
            "All packages providing openldap-servers are up to date",
            "All packages providing openldap-clients are up to date",
            ""
        ]
    }
}
2018-12-17 08:48:41,151 p=49954 u=Shimesaba |  TASK [start slapd (OpenLDAP)] **************************************************
2018-12-17 08:48:42,182 p=49954 u=Shimesaba |  ok: [default]
2018-12-17 08:48:42,219 p=49954 u=Shimesaba |  TASK [display slapd start result] **********************************************
2018-12-17 08:48:42,397 p=49954 u=Shimesaba |  ok: [default] => {
    "result": {
        "changed": false,
        "failed": false,
        "name": "slapd",
        "state": "started",
        "status": {
            "ActiveEnterTimestamp": "Sun 2018-12-16 23:29:51 UTC",
            "ActiveEnterTimestampMonotonic": "25401713",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "active",
            "After": "systemd-journald.socket syslog.target system.slice basic.target network-online.target",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "yes",
            "AssertTimestamp": "Sun 2018-12-16 23:29:47 UTC",
            "AssertTimestampMonotonic": "21770585",
            "Before": "multi-user.target shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "ConditionResult": "yes",
            "ConditionTimestamp": "Sun 2018-12-16 23:29:47 UTC",
            "ConditionTimestampMonotonic": "21770585",
            "Conflicts": "shutdown.target",
            "ControlGroup": "/system.slice/slapd.service",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "OpenLDAP Server Daemon",
            "DevicePolicy": "auto",
            "Documentation": "man:slapd man:slapd-config man:slapd-hdb man:slapd-mdb file:///usr/share/doc/openldap-servers/guide.html",
            "Environment": "SLAPD_URLS=ldap:///\\x20ldapi:/// SLAPD_OPTIONS=",
            "EnvironmentFile": "/etc/sysconfig/slapd (ignore_errors=no)",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "889",
            "ExecMainStartTimestamp": "Sun 2018-12-16 23:29:51 UTC",
            "ExecMainStartTimestampMonotonic": "25401628",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/sbin/slapd ; argv[]=/usr/sbin/slapd -u ldap -h ${SLAPD_URLS} $SLAPD_OPTIONS ; ignore_errors=no ; start_time=[Sun 2018-12-16 23:29:49 UTC] ; stop_time=[Sun 2018-12-16 23:29:51 UTC] ; pid=774 ; code=exited ; status=0 }",
            "ExecStartPre": "{ path=/usr/libexec/openldap/check-config.sh ; argv[]=/usr/libexec/openldap/check-config.sh ; ignore_errors=no ; start_time=[Sun 2018-12-16 23:29:47 UTC] ; stop_time=[Sun 2018-12-16 23:29:49 UTC] ; pid=718 ; code=exited ; status=0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/usr/lib/systemd/system/slapd.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "slapd.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestamp": "Sun 2018-12-16 23:29:47 UTC",
            "InactiveExitTimestampMonotonic": "21862471",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "1889",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "1889",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "889",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "slapd.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PIDFile": "/var/run/openldap/slapd.pid",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "basic.target",
            "Restart": "no",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "5",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "running",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "forking",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "enabled",
            "WantedBy": "multi-user.target",
            "Wants": "system.slice",
            "WatchdogTimestamp": "Sun 2018-12-16 23:29:51 UTC",
            "WatchdogTimestampMonotonic": "25401665",
            "WatchdogUSec": "0"
        }
    }
}
2018-12-17 08:48:42,434 p=49954 u=Shimesaba |  TASK [enable slapd (OpenLDAP)] *************************************************
2018-12-17 08:48:43,297 p=49954 u=Shimesaba |  ok: [default]
2018-12-17 08:48:43,380 p=49954 u=Shimesaba |  TASK [display result] **********************************************************
2018-12-17 08:48:43,574 p=49954 u=Shimesaba |  ok: [default] => {
    "result": {
        "changed": false,
        "enabled": true,
        "failed": false,
        "name": "slapd",
        "state": "started",
        "status": {
            "ActiveEnterTimestamp": "Sun 2018-12-16 23:29:51 UTC",
            "ActiveEnterTimestampMonotonic": "25401713",
            "ActiveExitTimestampMonotonic": "0",
            "ActiveState": "active",
            "After": "systemd-journald.socket syslog.target system.slice basic.target network-online.target",
            "AllowIsolate": "no",
            "AmbientCapabilities": "0",
            "AssertResult": "yes",
            "AssertTimestamp": "Sun 2018-12-16 23:29:47 UTC",
            "AssertTimestampMonotonic": "21770585",
            "Before": "multi-user.target shutdown.target",
            "BlockIOAccounting": "no",
            "BlockIOWeight": "18446744073709551615",
            "CPUAccounting": "no",
            "CPUQuotaPerSecUSec": "infinity",
            "CPUSchedulingPolicy": "0",
            "CPUSchedulingPriority": "0",
            "CPUSchedulingResetOnFork": "no",
            "CPUShares": "18446744073709551615",
            "CanIsolate": "no",
            "CanReload": "no",
            "CanStart": "yes",
            "CanStop": "yes",
            "CapabilityBoundingSet": "18446744073709551615",
            "ConditionResult": "yes",
            "ConditionTimestamp": "Sun 2018-12-16 23:29:47 UTC",
            "ConditionTimestampMonotonic": "21770585",
            "Conflicts": "shutdown.target",
            "ControlGroup": "/system.slice/slapd.service",
            "ControlPID": "0",
            "DefaultDependencies": "yes",
            "Delegate": "no",
            "Description": "OpenLDAP Server Daemon",
            "DevicePolicy": "auto",
            "Documentation": "man:slapd man:slapd-config man:slapd-hdb man:slapd-mdb file:///usr/share/doc/openldap-servers/guide.html",
            "Environment": "SLAPD_URLS=ldap:///\\x20ldapi:/// SLAPD_OPTIONS=",
            "EnvironmentFile": "/etc/sysconfig/slapd (ignore_errors=no)",
            "ExecMainCode": "0",
            "ExecMainExitTimestampMonotonic": "0",
            "ExecMainPID": "889",
            "ExecMainStartTimestamp": "Sun 2018-12-16 23:29:51 UTC",
            "ExecMainStartTimestampMonotonic": "25401628",
            "ExecMainStatus": "0",
            "ExecStart": "{ path=/usr/sbin/slapd ; argv[]=/usr/sbin/slapd -u ldap -h ${SLAPD_URLS} $SLAPD_OPTIONS ; ignore_errors=no ; start_time=[Sun 2018-12-16 23:29:49 UTC] ; stop_time=[Sun 2018-12-16 23:29:51 UTC] ; pid=774 ; code=exited ; status=0 }",
            "ExecStartPre": "{ path=/usr/libexec/openldap/check-config.sh ; argv[]=/usr/libexec/openldap/check-config.sh ; ignore_errors=no ; start_time=[Sun 2018-12-16 23:29:47 UTC] ; stop_time=[Sun 2018-12-16 23:29:49 UTC] ; pid=718 ; code=exited ; status=0 }",
            "FailureAction": "none",
            "FileDescriptorStoreMax": "0",
            "FragmentPath": "/usr/lib/systemd/system/slapd.service",
            "GuessMainPID": "yes",
            "IOScheduling": "0",
            "Id": "slapd.service",
            "IgnoreOnIsolate": "no",
            "IgnoreOnSnapshot": "no",
            "IgnoreSIGPIPE": "yes",
            "InactiveEnterTimestampMonotonic": "0",
            "InactiveExitTimestamp": "Sun 2018-12-16 23:29:47 UTC",
            "InactiveExitTimestampMonotonic": "21862471",
            "JobTimeoutAction": "none",
            "JobTimeoutUSec": "0",
            "KillMode": "control-group",
            "KillSignal": "15",
            "LimitAS": "18446744073709551615",
            "LimitCORE": "18446744073709551615",
            "LimitCPU": "18446744073709551615",
            "LimitDATA": "18446744073709551615",
            "LimitFSIZE": "18446744073709551615",
            "LimitLOCKS": "18446744073709551615",
            "LimitMEMLOCK": "65536",
            "LimitMSGQUEUE": "819200",
            "LimitNICE": "0",
            "LimitNOFILE": "4096",
            "LimitNPROC": "1889",
            "LimitRSS": "18446744073709551615",
            "LimitRTPRIO": "0",
            "LimitRTTIME": "18446744073709551615",
            "LimitSIGPENDING": "1889",
            "LimitSTACK": "18446744073709551615",
            "LoadState": "loaded",
            "MainPID": "889",
            "MemoryAccounting": "no",
            "MemoryCurrent": "18446744073709551615",
            "MemoryLimit": "18446744073709551615",
            "MountFlags": "0",
            "Names": "slapd.service",
            "NeedDaemonReload": "no",
            "Nice": "0",
            "NoNewPrivileges": "no",
            "NonBlocking": "no",
            "NotifyAccess": "none",
            "OOMScoreAdjust": "0",
            "OnFailureJobMode": "replace",
            "PIDFile": "/var/run/openldap/slapd.pid",
            "PermissionsStartOnly": "no",
            "PrivateDevices": "no",
            "PrivateNetwork": "no",
            "PrivateTmp": "no",
            "ProtectHome": "no",
            "ProtectSystem": "no",
            "RefuseManualStart": "no",
            "RefuseManualStop": "no",
            "RemainAfterExit": "no",
            "Requires": "basic.target",
            "Restart": "no",
            "RestartUSec": "100ms",
            "Result": "success",
            "RootDirectoryStartOnly": "no",
            "RuntimeDirectoryMode": "0755",
            "SameProcessGroup": "no",
            "SecureBits": "0",
            "SendSIGHUP": "no",
            "SendSIGKILL": "yes",
            "Slice": "system.slice",
            "StandardError": "inherit",
            "StandardInput": "null",
            "StandardOutput": "journal",
            "StartLimitAction": "none",
            "StartLimitBurst": "5",
            "StartLimitInterval": "10000000",
            "StartupBlockIOWeight": "18446744073709551615",
            "StartupCPUShares": "18446744073709551615",
            "StatusErrno": "0",
            "StopWhenUnneeded": "no",
            "SubState": "running",
            "SyslogLevelPrefix": "yes",
            "SyslogPriority": "30",
            "SystemCallErrorNumber": "0",
            "TTYReset": "no",
            "TTYVHangup": "no",
            "TTYVTDisallocate": "no",
            "TasksAccounting": "no",
            "TasksCurrent": "18446744073709551615",
            "TasksMax": "18446744073709551615",
            "TimeoutStartUSec": "1min 30s",
            "TimeoutStopUSec": "1min 30s",
            "TimerSlackNSec": "50000",
            "Transient": "no",
            "Type": "forking",
            "UMask": "0022",
            "UnitFilePreset": "disabled",
            "UnitFileState": "enabled",
            "WantedBy": "multi-user.target",
            "Wants": "system.slice",
            "WatchdogTimestamp": "Sun 2018-12-16 23:29:51 UTC",
            "WatchdogTimestampMonotonic": "25401665",
            "WatchdogUSec": "0"
        }
    }
}
2018-12-17 08:48:43,607 p=49954 u=Shimesaba |  TASK [check openldap default configuration SASL=EXTERNAL] **********************
2018-12-17 08:48:44,409 p=49954 u=Shimesaba |  changed: [default]
2018-12-17 08:48:44,462 p=49954 u=Shimesaba |  TASK [display result] **********************************************************
2018-12-17 08:48:44,772 p=49954 u=Shimesaba |  ok: [default] => {
    "result": {
        "changed": true,
        "cmd": [
            "ldapsearch",
            "-LLL",
            "-Y",
            "EXTERNAL",
            "-H",
            "ldapi:///",
            "-b",
            "cn=config",
            "dn"
        ],
        "delta": "0:00:00.024183",
        "end": "2018-12-16 23:48:44.259963",
        "failed": false,
        "rc": 0,
        "start": "2018-12-16 23:48:44.235780",
        "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0",
        "stderr_lines": [
            "SASL/EXTERNAL authentication started",
            "SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth",
            "SASL SSF: 0"
        ],
        "stdout": "dn: cn=config\n\ndn: cn=schema,cn=config\n\ndn: cn={0}core,cn=schema,cn=config\n\ndn: olcDatabase={-1}frontend,cn=config\n\ndn: olcDatabase={0}config,cn=config\n\ndn: olcDatabase={1}monitor,cn=config\n\ndn: olcDatabase={2}hdb,cn=config",
        "stdout_lines": [
            "dn: cn=config",
            "",
            "dn: cn=schema,cn=config",
            "",
            "dn: cn={0}core,cn=schema,cn=config",
            "",
            "dn: olcDatabase={-1}frontend,cn=config",
            "",
            "dn: olcDatabase={0}config,cn=config",
            "",
            "dn: olcDatabase={1}monitor,cn=config",
            "",
            "dn: olcDatabase={2}hdb,cn=config"
        ]
    }
}
2018-12-17 08:48:44,846 p=49954 u=Shimesaba |  TASK [check openldap default cn=config dn] *************************************
2018-12-17 08:48:46,530 p=49954 u=Shimesaba |  changed: [default]
2018-12-17 08:48:46,588 p=49954 u=Shimesaba |  TASK [display result] **********************************************************
2018-12-17 08:48:46,904 p=49954 u=Shimesaba |  ok: [default] => {
    "result": {
        "changed": true,
        "cmd": [
            "ldapsearch",
            "-LLL",
            "-H",
            "ldapi:///",
            "-b",
            "cn=config",
            "dn"
        ],
        "delta": "0:00:00.058209",
        "end": "2018-12-16 23:48:46.322637",
        "failed": false,
        "rc": 0,
        "start": "2018-12-16 23:48:46.264428",
        "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0",
        "stderr_lines": [
            "SASL/EXTERNAL authentication started",
            "SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth",
            "SASL SSF: 0"
        ],
        "stdout": "dn: cn=config\n\ndn: cn=schema,cn=config\n\ndn: cn={0}core,cn=schema,cn=config\n\ndn: olcDatabase={-1}frontend,cn=config\n\ndn: olcDatabase={0}config,cn=config\n\ndn: olcDatabase={1}monitor,cn=config\n\ndn: olcDatabase={2}hdb,cn=config",
        "stdout_lines": [
            "dn: cn=config",
            "",
            "dn: cn=schema,cn=config",
            "",
            "dn: cn={0}core,cn=schema,cn=config",
            "",
            "dn: olcDatabase={-1}frontend,cn=config",
            "",
            "dn: olcDatabase={0}config,cn=config",
            "",
            "dn: olcDatabase={1}monitor,cn=config",
            "",
            "dn: olcDatabase={2}hdb,cn=config"
        ]
    }
}
2018-12-17 08:48:47,006 p=49954 u=Shimesaba |  TASK [check base tree cn=config only] ******************************************
2018-12-17 08:48:48,169 p=49954 u=Shimesaba |  changed: [default]
2018-12-17 08:48:48,239 p=49954 u=Shimesaba |  TASK [display result] **********************************************************
2018-12-17 08:48:48,521 p=49954 u=Shimesaba |  ok: [default] => {
    "result": {
        "changed": true,
        "cmd": [
            "ldapsearch",
            "-LLL",
            "-H",
            "ldapi:///",
            "-b",
            "cn=config",
            "-s",
            "base"
        ],
        "delta": "0:00:00.054604",
        "end": "2018-12-16 23:48:48.029251",
        "failed": false,
        "rc": 0,
        "start": "2018-12-16 23:48:47.974647",
        "stderr": "SASL/EXTERNAL authentication started\nSASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\nSASL SSF: 0",
        "stderr_lines": [
            "SASL/EXTERNAL authentication started",
            "SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth",
            "SASL SSF: 0"
        ],
        "stdout": "dn: cn=config\nobjectClass: olcGlobal\ncn: config\nolcArgsFile: /var/run/openldap/slapd.args\nolcPidFile: /var/run/openldap/slapd.pid\nolcTLSCACertificatePath: /etc/openldap/certs\nolcTLSCertificateFile: \"OpenLDAP Server\"\nolcTLSCertificateKeyFile: /etc/openldap/certs/password",
        "stdout_lines": [
            "dn: cn=config",
            "objectClass: olcGlobal",
            "cn: config",
            "olcArgsFile: /var/run/openldap/slapd.args",
            "olcPidFile: /var/run/openldap/slapd.pid",
            "olcTLSCACertificatePath: /etc/openldap/certs",
            "olcTLSCertificateFile: \"OpenLDAP Server\"",
            "olcTLSCertificateKeyFile: /etc/openldap/certs/password"
        ]
    }
}
2018-12-17 08:48:48,525 p=49954 u=Shimesaba |  PLAY RECAP *********************************************************************
2018-12-17 08:48:48,525 p=49954 u=Shimesaba |  default                    : ok=17   changed=5    unreachable=0    failed=0   
